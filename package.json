{
  "scripts": {
    "test": "tsc && jest && prettier --check 'src/**'",
    "develop": "concurrently \"tsc --watch\" \"nodemon ./lib/index.js\""
  },
  "dependencies": {
    "crypto-random-string": "^3.2.0",
    "express": "^4.17.1",
    "mailparser": "^2.7.7",
    "pm2": "^4.2.3",
    "react": "^16.13.0",
    "react-dom": "^16.13.0",
    "smtp-server": "^3.6.0",
    "xml2js": "^0.4.23"
  },
  "devDependencies": {
    "@types/express": "^4.17.3",
    "@types/jest": "^25.1.4",
    "@types/mailparser": "^2.7.0",
    "@types/node": "^13.9.1",
    "@types/node-fetch": "^2.5.5",
    "@types/nodemailer": "^6.4.0",
    "@types/react": "^16.9.23",
    "@types/react-dom": "^16.9.5",
    "@types/smtp-server": "^3.5.3",
    "@types/xml2js": "^0.4.5",
    "concurrently": "^5.1.0",
    "jest": "^25.1.0",
    "node-fetch": "^2.6.0",
    "nodemailer": "^6.4.5",
    "nodemon": "^2.0.2",
    "prettier": "^1.19.1",
    "typescript": "^3.8.3"
  },
  "jest": {
    "rootDir": "lib",
    "testEnvironment": "node"
  },
  "apps": [
    {
      "name": "kill-the-newsletter",
      "script": "./lib/index.js"
    }
  ],
  "deploy": {
    "production": {
      "user": "root",
      "host": "204.48.21.111",
      "ref": "origin/master",
      "repo": "git@github.com:leafac/www.kill-the-newsletter.com.git",
      "path": "/root/www.kill-the-newsletter.com",
      "pre-setup-documentation": [
        "https://github.com/nodesource/distributions#debinstall",
        "https://certbot.eff.org/docs/install.html"
      ],
      "pre-setup": "ssh -o StrictHostKeyChecking=no git@github.com; apt-get update; apt-get install -y build-essential software-properties-common; curl -sL https://deb.nodesource.com/setup_13.x | bash -; add-apt-repository universe; add-apt-repository ppa:certbot/certbot; apt-get install -y nodejs certbot",
      "ssh_options": [
        "ForwardAgent=yes",
        "StrictHostKeyChecking=no"
      ],
      "TODO": [
        "certbot",
        "env NODE_ENVIRONMENT=production npm install",
        "rsync",
        "pm2 startup OR pm2 save",
        "pm2 start env.js"
      ],
      "env": {
        "NODE_ENV": "production"
      }
    }
  }
}
